<!DOCTYPE html>
<html lang="en-us">

<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=9" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Survey</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"crossorigin="anonymous">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type = "text/css" href= "css/styleIt.css">
	<script src="https://code.jquery.com/jquery.js"></script>
	 
</head>

<body>

	<div class="container">
		<div class="jumbotron" id="jumbo">
			<h1>Friend Finder</h1>
			<hr>
			<h3>Great friendship is right around the corner!</h3>

			<a href="/"><button class="btn btn-success btn-md"><span class="fa fa-plus"></span> Back to home</button></a>
		</div>
	</div>



	<div class="container">
		<div class="card">
			<div class="card-body">



				<h2>Survey Questions</h2>
				<hr>

				<h3><strong>About You</strong></h3>
				<h4>Name (Required)</h4>
				<input type="text" id="name" class="form-control" required>

				<h4>Link to Photo Image (Required)</h4>
				<input type="text" id="photo" class="form-control" required>

				<hr>

				<h3><strong>Question 1</strong></h3>
				<h4>You never rest and are always chasing the next best thing.</h4>
				<select class="chosen-select" id="q1">
					<option value=""></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3><strong>Question 2</strong></h3>
				<h4>You value experience and knowledge.</h4>
				<select class="chosen-select" id="q2">
					<option value=""></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>


				<h3><strong>Question 3</strong></h3>
				<h4>You can sell ketchup popcycles to a woman in white gloves.</h4>
				<select class="chosen-select" id="q3">
					<option value=""></option>
					<option value=1>1 (Strongly Disagree)</option>
					<option value=2>2</option>
					<option value=3>3</option>
					<option value=4>4</option>
					<option value=5>5 (Strongly Agree)</option>
				</select>


				<h3><strong>Question 4</strong></h3>
				<h4>You like to relax in a bubble bath.</h4>
				<select class="chosen-select" id="q4">
					<option value=""></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>


				<h3><strong>Question 5</strong></h3>
				<h4>People can rarely upset you.</h4>
				<select class="chosen-select" id="q5">
					<option value=""></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>


				<h3><strong>Question 6</strong></h3>
				<h4>You are a people pleaser.</h4>
				<select class="chosen-select" id="q6">
					<option value=""></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>


				<h3><strong>Question 7</strong></h3>
				<h4>You have Children.</h4>
				<select class="chosen-select" id="q7">
					<option value=""></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3><strong>Question 8</strong></h3>
				<h4>You like Science Fiction Movies and TV.</h4>
				<select class="chosen-select" id="q8">
					<option value=""></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3><strong>Question 9</strong></h3>
				<h4>You would rather spend a night watch netfix than going out.</h4>
				<select class="chosen-select" id="q9">
					<option value=""></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3><strong>Question 10</strong></h3>
				<h4>You feel at home at a football game</h4>
				<select class="chosen-select" id="q10">
					<option value=""></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<br>
				<br>

				<!-- Submit Button -->
				<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit" data-toggle="modal" data-target="#modal">
					Submit</button>

				<hr>
				<footer class="footer">
					<div class="container">
						<p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/ShelbySinz/friend-finder-express">GitHub
								Repo</a></p>
					</div>
				</footer>

			</div>
		</div>
	</div>

	<!-- Materialize Modal Structure
	<div id="modal" class="modal">
		<div class="modal-content">
			<span class="close">&times;</span>
			<h4>Your new friend</h4>
			<h5 id="usermatch"></h5>
			<img id="userMatchImage" width=250px>
		</div> -->

		<div id= "modal" class="modal" tabindex="-1" role="dialog">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">Your New Friend!</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
								<h5 id="usermatch"></h5>
								<img id="userMatchImage" width=250px>
						</div>
						<div class="modal-footer">
							
							
						</div>
					</div>
				</div>
			</div>



		<script>
			// Capture the form inputs
			$("#submit").on("click", function (event) {

				event.preventDefault();

				// Form validation
				function validateForm() {
					var isValid = true;
					$(".form-control").each(function () {
						if ($(this).val() === "") {
							isValid = false;
						}
					});

					$(".chosen-select").each(function () {

						if ($(this).val() === "") {
							isValid = false;
						}
					});
					return isValid;
				}

				// If all required fields are filled
				if (validateForm()) {
					// Create an object for the user"s data
					var userData = {
						Name: $("#name").val(),
						photo: $("#photo").val(),
						surveyAnswers: [
							$("#q1").val(),
							$("#q2").val(),
							$("#q3").val(),
							$("#q4").val(),
							$("#q5").val(),
							$("#q6").val(),
							$("#q7").val(),
							$("#q8").val(),
							$("#q9").val(),
							$("#q10").val()
						]
					};

					// AJAX post the data to the friends API.
					$.post("/api/friends", userData).done(function (data) {
						console.log(data);
						$('#usermatch').html(data.matchName);
						$("#userMatchImage").attr("src", data.matchImage);
						// Pop open the modal dialog
						$('#modal').css("display", "block");
						$(".close").on("click", function () {
							$("#modal").css("display", "none");

						});

						// When the user clicks anywhere outside of the modal, close it


					});
				} else {
					alert("Please fill out all fields before submitting!");
				}
			});
		</script>

</body>

</html>